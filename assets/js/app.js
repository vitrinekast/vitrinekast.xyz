var screenController=function(){const n="on",e="off",o="active";let r,i=[],f={snow:{},vcr:{opacity:1,miny:220,miny2:220,num:30,fps:60}};const l=(t=2)=>{if(!f.vcr)return!1;const e=f.vcr.canvas,n=f.vcr.ctx;let o=f.vcr.miny||0;var r=f.vcr.maxy||e.height;let i=f.vcr.miny2||0;var s=f.vcr.num||20,d=e.width;e.height;e.style.filter="blur(.1px)",n.clearRect(0,0,e.width,e.height),n.fillStyle="#fff",n.beginPath();for(var c=0;c<=s;c++){var a=Math.random(c)*d,l=getRandomInt(o+=3,r),u=getRandomInt(0,i-=3);n.fillRect(a,l,t,t),n.fillRect(a,u,t,t),n.fill(),v(n,a,l,t/5),v(n,a,u,t/5)}n.closePath()},v=(e,n,o,r)=>{var i=getRandomInt(1,50),t=[1,-1];let c=r;var a=t[Math.floor(Math.random()*t.length)];for(let t=0;t<i;t++){var l=getRandomInt(c-=.01,r),u=getRandomInt(1,4);r-=.1,u*=a,e.fillRect(n+=u,o,l,l),e.fill()}};function c(){a(e),i.forEach(t=>{t.el.pause(),t.el.removeAttribute(o)})}var u=t=>{if(!f.snow)return!1;for(var e=f.snow.ctx.canvas.width,n=f.snow.ctx.canvas.height,e=f.snow.ctx.createImageData(e,n),o=new Uint32Array(e.data.buffer),r=o.length,i=0;i<r;i++)o[i]=(255*Math.random()|0)<<24;f.snow.ctx.putImageData(e,0,0)},t=function(){u(),l(),requestAnimationFrame(t)},a=function(t){r.classList.remove(n),r.classList.remove(e),r.classList.add(t)};return{init:function(){if(!(r=document.querySelectorAll(".fn-videoplayer")[0]))return!1;document.querySelectorAll(".fn-video").forEach(t=>{i.push({el:t,url:t.src,fileName:t.getAttribute("data-file"),isPlaying:!1})}),f.snow.canvas=document.querySelector(".fn-snow"),f.snow.ctx=f.snow.canvas.getContext("2d"),f.vcr.canvas=document.querySelector(".fn-vcr"),f.vcr.ctx=f.vcr.canvas.getContext("2d"),t()},playItem:function(e){c();let t=i.find(t=>t.fileName===e);t&&(t.el.play(),t.el.setAttribute(o,!0),a(n))},stopAllItems:c}}();function getRandomInt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var tvItemController=function(){const d=4e3;let e=!1,n=[],o=0;function r(){n.forEach(t=>{t.classList.remove("active")})}function f(t){a(),screenController.playItem(this.getAttribute("data-video"))}function v(t){t.preventDefault(),a(),document.body.removeAttribute("footer-visible"),""!==t.target.getAttribute("href")&&window.setTimeout(function(){document.body.querySelector(".fn-tv-footer").href=t.target.getAttribute("href"),document.body.querySelector(".fn-project-name").textContent=t.target.textContent,document.body.setAttribute("footer-visible",!0)},100),screenController.playItem(t.target.getAttribute("data-video")),document.body.addEventListener("click",s,!0)}function m(t){l(forceStop=!0)}var i,c,a=function(){r(),i.removeAttribute("active"),e=window.clearInterval(e)},l=function(t=!1){o=0,e||t?(a(),screenController.stopAllItems()):(i.setAttribute("active",!0),u(),e=window.setInterval(()=>{u()},d))},u=function(){r();var t=n[o];t.classList.add("active"),screenController.playItem(t.getAttribute("data-video")),o===n.length-1?o=0:o++},s=function(){document.body.setAttribute("footer-visible",!1),l(forceStop=!0),document.body.removeEventListener("click",s,!0)};return{init:function(){c=utils.isTouchDevice(),document.body.querySelector(".fn-tv-footer"),document.querySelectorAll(".fn-tv-link").forEach(t=>{c?t.addEventListener("click",v):(t.addEventListener("mouseenter",f),t.addEventListener("mouseleave",m)),n.push(t)}),(i=document.querySelector(".fn-video-loop")).addEventListener("click",function(t){t.preventDefault(),l()})}}}(),utils={isTouchDevice:function(){return"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints}};window.onload=function(){screenController.init(),tvItemController.init(),document.body.classList.add("js-loaded")};